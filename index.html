<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Seats | Strategic Pricing Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root { --ss-red: #D32F2F; --ss-black: #1a1a1a; }
        body { font-family: 'Segoe UI', sans-serif; background-color: #f8fafc; }
        .input-field {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            margin-top: 0.25rem;
            transition: all 0.2s;
        }
        .input-field:focus {
            outline: none;
            border-color: var(--ss-red);
            box-shadow: 0 0 0 3px rgba(211, 47, 47, 0.1);
        }
    </style>
</head>
<body class="min-h-screen p-6">

    <div class="max-w-4xl mx-auto">
        
        <!-- Header -->
        <div class="flex items-center gap-4 mb-8">
            <div class="bg-red-700 text-white font-bold h-12 w-12 flex items-center justify-center rounded-lg text-xl shadow-lg">₹</div>
            <div>
                <h1 class="text-2xl font-bold text-gray-900">Margin Architect</h1>
                <p class="text-gray-500 text-sm">Strategic Pricing Tool for Super Seats & Accessories</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

            <!-- INPUT SECTION -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i data-lucide="calculator" class="w-5 h-5 text-red-600"></i> Cost Inputs
                </h2>

                <div class="space-y-4">
                    <div>
                        <label class="text-xs font-bold text-gray-500 uppercase tracking-wide">Product Name</label>
                        <input type="text" id="productName" placeholder="e.g., Splendor Seat Cover" class="input-field">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="text-xs font-bold text-gray-500 uppercase tracking-wide">Mfg/Purchase Cost (₹)</label>
                            <input type="number" id="costPrice" placeholder="0" class="input-field">
                        </div>
                        <div>
                            <label class="text-xs font-bold text-gray-500 uppercase tracking-wide">Overheads (pkg, labour) (₹)</label>
                            <input type="number" id="overhead" placeholder="0" class="input-field">
                        </div>
                    </div>

                    <div>
                        <label class="text-xs font-bold text-gray-500 uppercase tracking-wide">Target Net Margin (%)</label>
                        <input type="range" id="marginSlider" min="5" max="60" value="25" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mt-2 accent-red-600">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>Low (5%)</span>
                            <span id="marginValue" class="font-bold text-red-700">25%</span>
                            <span>High (60%)</span>
                        </div>
                    </div>

                    <!-- Channel Selector -->
                    <div class="p-4 bg-gray-50 rounded-lg border border-gray-100">
                        <label class="text-xs font-bold text-gray-500 uppercase tracking-wide mb-2 block">Sales Channel</label>
                        <div class="flex gap-2">
                            <button onclick="setChannel('retail')" class="channel-btn flex-1 py-2 px-3 text-sm font-medium rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-2 focus:ring-offset-2 focus:ring-red-500 active">Retail (Showroom)</button>
                            <button onclick="setChannel('amazon')" class="channel-btn flex-1 py-2 px-3 text-sm font-medium rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-2 focus:ring-offset-2 focus:ring-red-500">Amazon</button>
                            <button onclick="setChannel('wholesale')" class="channel-btn flex-1 py-2 px-3 text-sm font-medium rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-2 focus:ring-offset-2 focus:ring-red-500">Wholesale</button>
                        </div>
                        
                        <!-- Amazon Extra Fields -->
                        <div id="amazonFields" class="hidden mt-3 pt-3 border-t border-gray-200">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="text-xs font-bold text-gray-500 uppercase tracking-wide">Amazon Comm (%)</label>
                                    <input type="number" id="amazonComm" value="18" class="input-field">
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-gray-500 uppercase tracking-wide">Fixed Closing Fee (₹)</label>
                                    <input type="number" id="amazonFixed" value="30" class="input-field">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button onclick="calculatePrice()" class="w-full bg-red-700 text-white font-bold py-3 rounded-lg shadow-md hover:bg-red-800 transition-colors flex items-center justify-center gap-2">
                        Generate Price <i data-lucide="arrow-right-circle" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>

            <!-- OUTPUT SECTION -->
            <div class="space-y-6">
                
                <!-- Main Price Card -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-red-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 -mt-4 -mr-4 bg-gray-100 h-24 w-24 rounded-full opacity-50"></div>
                    
                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-1">Recommended Selling Price</h3>
                    <div class="flex items-baseline gap-1">
                        <span class="text-4xl font-black text-gray-900">₹</span>
                        <span id="finalPrice" class="text-5xl font-black text-gray-900">0</span>
                    </div>
                    
                    <div class="mt-6 pt-6 border-t border-dashed border-gray-300 grid grid-cols-3 gap-4 text-center">
                        <div>
                            <p class="text-xs text-gray-500">Total Cost</p>
                            <p id="displayCost" class="font-bold text-gray-800 text-lg">₹0</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">Net Profit</p>
                            <p id="displayProfit" class="font-bold text-green-600 text-lg">₹0</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">ROI</p>
                            <p id="displayROI" class="font-bold text-blue-600 text-lg">0%</p>
                        </div>
                    </div>
                </div>

                <!-- Psychology Card -->
                <div class="bg-indigo-50 p-6 rounded-xl border border-indigo-100">
                    <h3 class="text-indigo-800 font-bold flex items-center gap-2 mb-3">
                        <i data-lucide="brain-circuit" class="w-5 h-5"></i> Psychological Pricing
                    </h3>
                    <p class="text-sm text-indigo-700 mb-4">Don't use the raw number. Use "Charm Pricing" to increase conversion.</p>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-white p-3 rounded shadow-sm text-center">
                            <span class="block text-xs text-gray-400 uppercase">Charm Price</span>
                            <span id="charmPrice" class="block text-xl font-bold text-gray-900">₹0</span>
                        </div>
                        <div class="bg-white p-3 rounded shadow-sm text-center">
                            <span class="block text-xs text-gray-400 uppercase">Premium Round</span>
                            <span id="roundPrice" class="block text-xl font-bold text-gray-900">₹0</span>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <div class="mt-8 text-center text-gray-400 text-sm">
            &copy; 2026 Super Seats & Accessories. Internal Tool.
        </div>
    </div>

    <script>
        lucide.createIcons();
        let currentChannel = 'retail';

        // Slider Listener
        const slider = document.getElementById('marginSlider');
        const output = document.getElementById('marginValue');
        slider.oninput = function() {
            output.innerHTML = this.value + "%";
        }

        function setChannel(channel) {
            currentChannel = channel;
            
            // UI Toggle
            document.querySelectorAll('.channel-btn').forEach(btn => {
                btn.classList.remove('bg-red-50', 'text-red-700', 'border-red-300', 'ring-2', 'ring-red-500');
                btn.classList.add('bg-white', 'text-gray-700', 'border-gray-300');
            });
            event.target.classList.remove('bg-white', 'text-gray-700', 'border-gray-300');
            event.target.classList.add('bg-red-50', 'text-red-700', 'border-red-300', 'ring-1', 'ring-red-500');

            // Show/Hide Amazon Fields
            const amazonFields = document.getElementById('amazonFields');
            if(channel === 'amazon') {
                amazonFields.classList.remove('hidden');
            } else {
                amazonFields.classList.add('hidden');
            }
        }

        function calculatePrice() {
            // Get inputs
            const cp = parseFloat(document.getElementById('costPrice').value) || 0;
            const overhead = parseFloat(document.getElementById('overhead').value) || 0;
            const targetMargin = parseFloat(document.getElementById('marginSlider').value) / 100;
            
            let totalCost = cp + overhead;
            let sellingPrice = 0;
            let profit = 0;

            if (currentChannel === 'amazon') {
                const commPercent = parseFloat(document.getElementById('amazonComm').value) / 100;
                const fixedFee = parseFloat(document.getElementById('amazonFixed').value) || 0;
                
                // Formula: SP = (TotalCost + FixedFee + Profit) / (1 - Comm%)
                // To keep it simple for target margin on COST:
                // Profit = TotalCost * TargetMargin
                // SP - (SP * Comm) - FixedFee = TotalCost + Profit
                // SP * (1 - Comm) = TotalCost + Profit + FixedFee
                // SP = (TotalCost * (1 + TargetMargin) + FixedFee) / (1 - CommPercent)

                sellingPrice = (totalCost * (1 + targetMargin) + fixedFee) / (1 - commPercent);
                
                // Recalculate actual profit for display
                const amazonCut = (sellingPrice * commPercent) + fixedFee;
                profit = sellingPrice - amazonCut - totalCost;

            } else {
                // Standard Cost Plus Margin: SP = Cost * (1 + Margin)
                sellingPrice = totalCost * (1 + targetMargin);
                profit = sellingPrice - totalCost;
            }

            // Update UI
            document.getElementById('finalPrice').innerText = Math.ceil(sellingPrice);
            document.getElementById('displayCost').innerText = '₹' + Math.ceil(totalCost);
            document.getElementById('displayProfit').innerText = '₹' + Math.ceil(profit);
            document.getElementById('displayROI').innerText = Math.round((profit / totalCost) * 100) + '%';

            // Psychology Pricing
            // Ends in 99
            let base = Math.floor(sellingPrice / 100) * 100;
            let charm = base + 99;
            if (charm < sellingPrice) charm += 100; // Ensure we don't go below target
            document.getElementById('charmPrice').innerText = '₹' + charm;

            // Round to nearest 50
            let round = Math.ceil(sellingPrice / 50) * 50;
            document.getElementById('roundPrice').innerText = '₹' + round;
        }

        // Init
        document.querySelector('.channel-btn').click(); // Select first channel
    </script>
</body>
</html>
