<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Seats & Accessories - Sales Report</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chart.js Data Labels Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8FAFC; /* Slate 50 */
            color: #1E293B; /* Slate 800 */
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #4361EE;
            border-radius: 4px;
        }

        /* Chart Container Utilities */
        .chart-container {
            position: relative;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            background: white;
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1rem;
        }
        
        .chart-responsive-height {
            height: 350px;
            max-height: 400px;
        }

        @media (min-width: 1024px) {
            .chart-responsive-height {
                height: 450px;
            }
        }

        /* Palette Classes for Dynamic Usage */
        .text-vibrant-blue { color: #4361EE; }
        .text-vibrant-pink { color: #F72585; }
        .text-vibrant-cyan { color: #4CC9F0; }
        .text-vibrant-purple { color: #7209B7; }
        .text-vibrant-orange { color: #FF9F1C; }

        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* PRINT MEDIA QUERIES */
        @media print {
            body {
                background-color: white;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            nav, .no-print {
                display: none !important;
            }
            main {
                padding-top: 0;
                margin-top: 0;
            }
            section {
                break-inside: avoid;
                page-break-inside: avoid;
                margin-bottom: 2rem;
            }
            .chart-container {
                box-shadow: none;
                border: 1px solid #e2e8f0;
                break-inside: avoid;
            }
            .card-shadow {
                box-shadow: none;
                border: 1px solid #e2e8f0;
            }
            /* Ensure text is black for readability */
            p, h1, h2, h3, span {
                color: #000 !important;
            }
            /* Hide URL footers in some browsers */
            @page {
                margin: 1cm;
                size: auto; 
            }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Navigation / Header -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-200 shadow-sm no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex-shrink-0 flex items-center gap-4">
                    <img 
                        src="https://lh3.googleusercontent.com/d/1tScmvoam2uA7-hug7z6S9zW_wg7GcBi7" 
                        alt="Logo" 
                        class="h-12 w-auto object-contain"
                        referrerpolicy="no-referrer"
                        onerror="this.style.display='none'"
                    >
                    <span class="text-2xl font-extrabold text-[#1E293B] tracking-tight">
                        Super Seats & Accessories
                    </span>
                </div>
                <div class="flex items-center gap-4">
                    <div class="hidden md:block text-sm font-bold text-gray-500 uppercase tracking-wide bg-gray-100 px-3 py-1 rounded-full">
                        Q4 Sales Orders Performance Report 2025
                    </div>
                    <button onclick="window.print()" class="bg-[#4361EE] hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
                        </svg>
                        Print Report
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-16">

        <!-- Print-only Header (replicates nav for paper) -->
        <div class="hidden print:block text-center mb-8 border-b pb-4">
            <h1 class="text-3xl font-extrabold mb-2">Super Seats & Accessories</h1>
            <h2 class="text-xl text-gray-600">Q4 Sales Orders Performance Report 2025</h2>
        </div>

        <!-- Section 1: Introduction & KPIs -->
        <section>
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-extrabold text-[#1E293B] mb-4 print:text-2xl">
                    Sales Order Analysis
                </h1>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed print:text-sm">
                    This report breaks down Q4 2025 sales data across our dealer network. We examine order volumes, product preferences, and model-specific trends to highlight key revenue drivers and top-performing accounts like <span class="font-bold text-vibrant-blue">Dhanlaxmi TVS</span>.
                </p>
            </div>

            <!-- KPI Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- KPI 1 -->
                <div class="bg-white rounded-xl p-6 card-shadow border-l-4 border-[#4361EE]">
                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider">Top Customer</h3>
                    <div class="mt-2 flex items-baseline gap-2">
                        <span class="text-2xl font-bold text-[#1E293B]">Dhanlaxmi TVS</span>
                    </div>
                    <p class="text-sm text-gray-500 mt-2">Highest volume of accessory kits ordered.</p>
                </div>

                <!-- KPI 2 -->
                <div class="bg-white rounded-xl p-6 card-shadow border-l-4 border-[#F72585]">
                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider">Lead Model</h3>
                    <div class="mt-2 flex items-baseline gap-2">
                        <span class="text-3xl font-bold text-[#1E293B]">Jupiter 113</span>
                    </div>
                    <p class="text-sm text-gray-500 mt-2">Leading sales volume among specific vehicle models.</p>
                </div>

                <!-- KPI 3 -->
                <div class="bg-white rounded-xl p-6 card-shadow border-l-4 border-[#FF9F1C]">
                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider">Top Category</h3>
                    <div class="mt-2 flex items-baseline gap-2">
                        <span class="text-3xl font-bold text-[#1E293B]">Accessory Kits</span>
                    </div>
                    <p class="text-sm text-gray-500 mt-2">"Set of 3" bundles are the primary volume driver.</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Customer Landscape -->
        <section>
            <div class="flex flex-col md:flex-row items-start gap-8">
                <div class="md:w-1/3">
                    <h2 class="text-2xl font-bold text-[#1E293B] mb-4 border-l-4 border-[#7209B7] pl-3 print:text-xl">
                        Dealer Performance Landscape
                    </h2>
                    <p class="text-gray-600 mb-4 leading-relaxed text-sm">
                        The chart illustrates the total quantity of items ordered by each dealer. <span class="font-semibold text-vibrant-purple">Dhanlaxmi TVS</span> is the clear outlier.
                    </p>
                    <p class="text-gray-600 leading-relaxed text-sm">
                        Data labels on top of bars indicate exact quantities for easy reference on paper.
                    </p>
                </div>
                <div class="md:w-2/3 w-full">
                    <div class="chart-container card-shadow">
                        <div class="chart-responsive-height">
                            <canvas id="customerVolumeChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Product & Model Analysis -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            
            <!-- Model Dominance -->
            <div class="flex flex-col">
                <div class="mb-4">
                    <h2 class="text-2xl font-bold text-[#1E293B] mb-2 border-l-4 border-[#F72585] pl-3 print:text-xl">
                        Vehicle Model Dominance
                    </h2>
                    <p class="text-gray-600 text-sm">
                        Breaking down by specific model: <span class="font-bold text-vibrant-pink">Jupiter 113</span> and <span class="font-bold text-vibrant-cyan">Jupiter 125</span> are distinct categories.
                    </p>
                </div>
                <div class="chart-container card-shadow flex-grow">
                    <div class="chart-responsive-height">
                        <canvas id="modelDominanceChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Product Category Mix -->
            <div class="flex flex-col">
                <div class="mb-4">
                    <h2 class="text-2xl font-bold text-[#1E293B] mb-2 border-l-4 border-[#4CC9F0] pl-3 print:text-xl">
                        Product Category Mix
                    </h2>
                    <p class="text-gray-600 text-sm">
                        A mix of Accessory Sets, Seat Covers, and Matting. Labels show the exact volume per category.
                    </p>
                </div>
                <div class="chart-container card-shadow flex-grow">
                    <div class="chart-responsive-height">
                        <canvas id="categoryMixChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Deep Dive Heatmap -->
        <section>
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-[#1E293B] mb-4 border-l-4 border-[#4361EE] pl-3 print:text-xl">
                    Buying Patterns: Dealer vs. Product Category
                </h2>
                <p class="text-gray-600 max-w-4xl text-sm">
                    This heatmap reveals the specific purchasing habits of each dealer. Numbers inside the grid represent order quantities.
                </p>
            </div>
            
            <div class="chart-container card-shadow" style="max-width: 100%;">
                <!-- Plotly Chart Container -->
                <div id="heatmapContainer" class="w-full h-[500px]"></div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="border-t border-gray-200 pt-8 pb-12 text-center">
            <p class="text-gray-400 text-sm">
                Generated based on Sales Order Report Data. <br>
                All data rights reserved to Super Seats & AccessoriesÂ®, misusing any data is punishable offence. 
            </p>
        </footer>

    </main>

    <!-- Data Processing & Chart Generation Script -->
    <script>
        // Register the DataLabels plugin for Chart.js
        Chart.register(ChartDataLabels);

        // --- 1. Data Preparation ---
        const rawData = [
            { customer: "Ajinkyatara TVS", items: [
                { name: "JUPITER 113-SET OF 3 ACCESSORIES", qty: 1 }, { name: "JUPITER 113 SEAT COVER", qty: 1 },
                { name: "JUPITER 113 MATTING", qty: 1 }, { name: "JUPITER 125 SET OF 3 ACCESSORIES", qty: 1 },
                { name: "IQUBE SET OF 2 ACCESSORIES", qty: 1 }, { name: "NTORQ SET OF 3 ACCESSORIES", qty: 1 },
                { name: "ZEST-SET OF ACCESSORIES", qty: 1 }
            ]},
            { customer: "Balaji Auto", items: [
                { name: "ACTIVA 6G SET OF ACCESSORIES", qty: 22 }, { name: "ACTIVA 6G-SEAT COVER", qty: 22 },
                { name: "ACTIVA 6G MATTING", qty: 20 }, { name: "GRIP COVER", qty: 22 },
                { name: "BUZZER", qty: 20 }, { name: "SIDE STAND", qty: 21 },
                { name: "FOLDING FOOT-REST", qty: 21 }, { name: "ACTIVA 125 SET OF ACCESSORIES", qty: 2 },
                { name: "ACTIVA 125-SEAT COVER", qty: 2 }, { name: "ACTIVA 125 MATTING", qty: 2 },
                { name: "Misc Spares", qty: 8 }
            ]},
            { customer: "Chhatrapati TVS", items: [
                { name: "JUPITER 113-SET OF 3 ACCESSORIES", qty: 19 }, { name: "JUPITER 113 SEAT COVER", qty: 35 },
                { name: "GARAGE - FULL VEHICLE COVER", qty: 2 }, { name: "JUPITER 125 SET OF 3 ACCESSORIES", qty: 7 },
                { name: "JUPITER 125 SEAT COVER", qty: 22 }, { name: "Misc Jupiter Items", qty: 2 },
                { name: "NTORQ Items", qty: 2 }, { name: "ZEST Items", qty: 4 }
            ]},
            { customer: "Dhanlaxmi TVS", items: [
                { name: "JUPITER 113-SET OF 3 ACCESSORIES", qty: 107 }, { name: "JUPITER 125-SET OF 3 ACCESSORIES", qty: 65 },
                { name: "JUPITER 125 SEAT COVER", qty: 106 }, { name: "ZEST-SET OF ACCESSORIES", qty: 16 },
                { name: "ZEST SEAT COVER", qty: 16 }, { name: "ZEST MATTING", qty: 10 },
                { name: "JUPITER 125 MATTING", qty: 25 }, { name: "JUPITER 125 SET OF 3 ACCESSORIES", qty: 45 },
                { name: "JUPITER 113 DANDI Left", qty: 1 }, { name: "JUPITER 113 DANDI Right", qty: 10 },
                { name: "JUPITER 113 SEAT COVER", qty: 51 }, { name: "JUPITER 113 MATTING", qty: 50 }, 
                { name: "NTORQ Items", qty: 23 }, { name: "Misc Jupiter Spares", qty: 11 }
            ]},
            { customer: "Prashant Auto TVS", items: [
                { name: "JUPITER 113-SET OF 3 ACCESSORIES", qty: 5 }, { name: "JUPITER 113 SEAT COVER", qty: 20 },
                { name: "JUPITER 113 MATTING", qty: 5 }, { name: "JUPITER 125-SET OF 3 ACCESSORIES", qty: 10 },
                { name: "JUPITER 125 SEAT COVER", qty: 10 }, { name: "JUPITER 125 MATTING", qty: 10 },
                { name: "IQUBE Items", qty: 11 }, { name: "NTORQ Items", qty: 6 },
                { name: "ZEST-SET OF ACCESSORIES", qty: 5 }
            ]},
            { customer: "Rishika TVS", items: [
                { name: "JUPITER 113 Items", qty: 5 }, { name: "JUPITER 125 Items", qty: 3 },
                { name: "ZEST Items", qty: 2 }, { name: "IQUBE Items", qty: 1 }
            ]},
            { customer: "Shakuntal Motors", items: [
                { name: "JUPITER 125 Items", qty: 6 }, { name: "NUMBER PLATES FRAME SET", qty: 100 },
                { name: "JUPITER 113 Items", qty: 4 }
            ]},
            { customer: "Shelar TVS Parvati", items: [
                { name: "JUPITER 113-SET OF 3 ACCESSORIES", qty: 44 }, { name: "JUPITER 113 SEAT COVER", qty: 44 },
                { name: "JUPITER 113 MATTING", qty: 44 }, { name: "ZEST Items", qty: 24 },
                { name: "JUPITER 125 Items", qty: 42 }, { name: "Misc Spares", qty: 16 }
            ]},
            { customer: "Shivanya TVS", items: [
                { name: "JUPITER 113 Items", qty: 2 }, { name: "JUPITER 125 Items", qty: 2 },
                { name: "ZEST Items", qty: 2 }, { name: "NTORQ Items", qty: 2 }
            ]},
            { customer: "Shri Siddhivinayak", items: [
                { name: "JUPITER 113 Items", qty: 10 }, { name: "IQUBE Items", qty: 14 },
                { name: "CHETAK Items", qty: 2 }, { name: "JUPITER 125 Items", qty: 3 }
            ]},
            { customer: "Shri Dattatray Auto", items: [
                { name: "JUPITER 113 Items", qty: 19 }, { name: "JUPITER 110 Items", qty: 6 },
                { name: "ZEST Items", qty: 7 }, { name: "Misc Seats", qty: 2 }
            ]},
            { customer: "Shriram Motors", items: [
                { name: "JUPITER 113-SET OF 3 ACCESSORIES Replacement", qty: 20 }
            ]},
            { customer: "Swami Krupa Auto", items: [
                { name: "CHETAK Items", qty: 17 }, { name: "ACTIVA 6G Items", qty: 44 }
            ]}
        ];

        // --- 2. Helper Functions ---
        
        function wrapLabel(str, maxLen = 16) {
            if (str.length <= maxLen) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= maxLen) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        const vibrantPalette = [
            '#4361EE', '#F72585', '#4CC9F0', '#7209B7', '#FF9F1C', 
            '#06D6A0', '#EF476F', '#FFD166', '#118AB2', '#073B4C', 
            '#9B5DE5', '#F15BB5', '#FEE440', '#00BBF9', '#00F5D4', 
            '#9D4EDD', '#FF0054', '#3A0CA3', '#8338EC', '#FB5607'
        ];

        // Global Chart Options with DataLabels
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                tooltip: {
                    // Keep tooltips for screen, but labels cover print needs
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) return label.join(' ');
                            return label;
                        }
                    }
                },
                legend: {
                    labels: {
                        font: { family: 'Inter', size: 12 },
                        color: '#475569'
                    }
                },
                // CONFIG FOR STATIC NUMBERS ON CHARTS
                datalabels: {
                    color: '#1E293B',
                    font: {
                        weight: 'bold',
                        size: 11
                    },
                    padding: 4,
                    formatter: (value, ctx) => {
                        return value > 0 ? value : ''; // Hide 0s
                    }
                }
            }
        };

        // --- 3. Data Aggregation Logic ---

        // A. Customer Totals
        const customerTotals = rawData.map(c => {
            const total = c.items.reduce((sum, item) => sum + item.qty, 0);
            return { name: c.customer, total: total };
        }).sort((a, b) => b.total - a.total);

        // B. Model Extraction
        const modelCounts = {};
        const categoryCounts = { "Accessories": 0, "Seat Covers": 0, "Matting": 0, "Spares": 0 };
        const heatmapData = [];

        rawData.forEach(cust => {
            cust.items.forEach(item => {
                const upperName = item.name.toUpperCase();
                
                let model = "Other";
                if (upperName.includes("JUPITER 113")) model = "Jupiter 113";
                else if (upperName.includes("JUPITER 125")) model = "Jupiter 125";
                else if (upperName.includes("JUPITER")) model = "Jupiter (Other)";
                else if (upperName.includes("ACTIVA")) model = "Activa";
                else if (upperName.includes("ZEST")) model = "Zest";
                else if (upperName.includes("NTORQ")) model = "Ntorq";
                else if (upperName.includes("IQUBE")) model = "iQube";
                else if (upperName.includes("CHETAK")) model = "Chetak";
                
                modelCounts[model] = (modelCounts[model] || 0) + item.qty;

                let category = "Spares";
                if (upperName.includes("SET OF") || upperName.includes("ACCESSORIES")) category = "Accessories";
                else if (upperName.includes("SEAT COVER")) category = "Seat Covers";
                else if (upperName.includes("MATTING")) category = "Matting";
                
                categoryCounts[category] += item.qty;

                heatmapData.push({
                    customer: cust.customer,
                    category: category,
                    qty: item.qty
                });
            });
        });

        // --- 4. Chart Generation ---

        // Chart 1: Customer Volume (Bar)
        const ctxCustomer = document.getElementById('customerVolumeChart').getContext('2d');
        new Chart(ctxCustomer, {
            type: 'bar',
            data: {
                labels: customerTotals.map(c => wrapLabel(c.name)),
                datasets: [{
                    label: 'Total Items Ordered',
                    data: customerTotals.map(c => c.total),
                    backgroundColor: vibrantPalette.slice(0, customerTotals.length),
                    borderRadius: 6
                }]
            },
            options: {
                ...commonOptions,
                plugins: {
                    ...commonOptions.plugins,
                    datalabels: {
                        ...commonOptions.plugins.datalabels,
                        anchor: 'end',
                        align: 'top', // Show numbers on top of bars
                        offset: -2
                    }
                },
                scales: {
                    y: { beginAtZero: true, grid: { color: '#e2e8f0' } },
                    x: { grid: { display: false } }
                }
            }
        });

        // Chart 2: Model Dominance (Polar Area)
        const sortedModels = Object.entries(modelCounts).sort((a, b) => b[1] - a[1]);
        const ctxModel = document.getElementById('modelDominanceChart').getContext('2d');
        new Chart(ctxModel, {
            type: 'polarArea',
            data: {
                labels: sortedModels.map(m => m[0]),
                datasets: [{
                    data: sortedModels.map(m => m[1]),
                    backgroundColor: vibrantPalette.slice(0, sortedModels.length).map(color => color + 'CC'),
                    borderWidth: 1
                }]
            },
            options: {
                ...commonOptions,
                plugins: {
                    ...commonOptions.plugins,
                    datalabels: {
                        ...commonOptions.plugins.datalabels,
                        backgroundColor: 'white',
                        borderRadius: 4,
                        display: 'auto' // Hide overlap
                    }
                },
                scales: { r: { grid: { color: '#e2e8f0' }, ticks: { display: false, backdropColor: 'transparent' } } }
            }
        });

        // Chart 3: Category Mix (Doughnut)
        const ctxCategory = document.getElementById('categoryMixChart').getContext('2d');
        new Chart(ctxCategory, {
            type: 'doughnut',
            data: {
                labels: Object.keys(categoryCounts),
                datasets: [{
                    data: Object.values(categoryCounts),
                    backgroundColor: vibrantPalette.slice(0, Object.keys(categoryCounts).length),
                    hoverOffset: 10,
                    borderWidth: 0
                }]
            },
            options: {
                ...commonOptions,
                cutout: '65%',
                plugins: {
                    ...commonOptions.plugins,
                    legend: { position: 'right' },
                    datalabels: {
                        color: 'white',
                        font: { weight: 'bold', size: 12 },
                        formatter: (value, ctx) => {
                            let sum = ctx.dataset.data.reduce((a, b) => a + b, 0);
                            let percentage = (value * 100 / sum).toFixed(1) + "%";
                            return percentage;
                        }
                    }
                }
            }
        });

        // Chart 4: Heatmap (Plotly)
        const uniqueCustomers = customerTotals.map(c => c.name);
        const uniqueCategories = ["Accessories", "Seat Covers", "Matting", "Spares"];
        
        const zData = uniqueCategories.map(() => uniqueCustomers.map(() => 0));
        
        // Prepare text data for static labels on heatmap
        const textData = uniqueCategories.map(() => uniqueCustomers.map(() => ""));

        heatmapData.forEach(d => {
            const xIndex = uniqueCustomers.indexOf(d.customer);
            const yIndex = uniqueCategories.indexOf(d.category);
            if(xIndex > -1 && yIndex > -1) {
                zData[yIndex][xIndex] += d.qty;
                textData[yIndex][xIndex] = d.qty.toString(); // Set text only where data exists
            }
        });

        const plotData = [{
            z: zData,
            x: uniqueCustomers,
            y: uniqueCategories,
            text: textData, // Bind text data
            texttemplate: "%{text}", // Show text on cells
            type: 'heatmap',
            colorscale: [
                [0, '#F8FAFC'], 
                [0.1, '#C4DAFA'], 
                [0.5, '#4361EE'], 
                [1, '#3A0CA3']
            ],
            hoverongaps: false
        }];

        const plotLayout = {
            font: { family: 'Inter', color: '#1E293B' },
            margin: { t: 20, r: 20, b: 100, l: 100 },
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            xaxis: { 
                tickangle: -45,
                title: { text: 'Customer' }
            },
            yaxis: { 
                title: { text: 'Product Category' }
            }
        };
        
        const config = { responsive: true, displayModeBar: false, renderer: 'canvas' }; 
        
        Plotly.newPlot('heatmapContainer', plotData, plotLayout, config);

    </script>
</body>
</html>
